<div class="tool-form-container">
    <h1>{{ isEditMode ? 'Επεξεργασία Εργαλείου' : 'Εισαγωγή Νέου Εργαλείου' }}</h1>

    <form [formGroup]="toolForm" (ngSubmit)="onSubmit()">
        <div class="form-sections">

            <!-- Left Section: Image Upload -->
            <div class="left-section">
                <div class="image-upload">
                    <div class="image-preview">
                        <img *ngIf="toolForm.get('imageUrl')?.value" 
                             [src]="toolForm.get('imageUrl')?.value" alt="Tool Image">
                        <div *ngIf="!toolForm.get('imageUrl')?.value" class="placeholder">
                            <mat-icon>image</mat-icon>
                        </div>
                    </div>
                    <button type="button" class="image-btn" (click)="triggerFileInput()">Εισαγωγή Εικόνας</button>
                    <input type="file" #fileInput (change)="onFileSelected($event)" accept="image/*" hidden>
                </div>

                <!-- General Information -->
                <div class="tool-details">
                    <h3>Γενικές Πληροφορίες</h3>
                    <div class="form-group">
                        <label>Όνομα Προϊόντος</label>
                        <input type="text" formControlName="name" placeholder="Εισάγετε Όνομα Προϊόντος">
                    </div>

                    <div class="form-group">
                        <label>Περιγραφή Προϊόντος</label>
                        <textarea formControlName="description" placeholder="Εισάγετε Περιγραφή Προϊόντος"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Link Προϊόντος</label>
                        <input type="url" formControlName="productLink" placeholder="Εισάγετε Link Προϊόντος">
                    </div>
                </div>
            </div>

            <!-- Right Section: Dynamic Feature Selection -->
            <div class="right-section">
                <h3>Κριτήρια Αναζήτησης</h3>

                <div *ngFor="let group of featureGroups">
                    <label [for]="'featureGroup' + group.id">{{ group.name }}</label>
                    <select [id]="'featureGroup' + group.id" 
                            [formControlName]="'featureGroup' + group.id" 
                            class="custom-select">
                        <option *ngFor="let item of featureItems[group.id]" 
                                [value]="item.name">
                            {{ item.name }}
                        </option>
                    </select>
                </div>

                <!-- Checkboxes
                <div class="checkbox-group">
                    <mat-checkbox formControlName="animation">Animation</mat-checkbox>
                    <mat-checkbox formControlName="wireframing">Wireframing</mat-checkbox>
                </div> -->
            </div>
        </div>

        <!-- Buttons -->
        <div class="button-group">
            <button type="button" class="cancel-btn" (click)="cancel()">Ακύρωση</button>
            <button type="submit" class="save-btn" [disabled]="toolForm.invalid">
                {{ isEditMode ? 'Ενημέρωση' : 'Δημιουργία' }}
            </button>
        </div>
    </form>
</div>